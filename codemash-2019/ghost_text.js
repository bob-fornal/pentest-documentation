
function process(text) {
  let result = '';
  let consecutive = 0;
  for (let i = 1, i_len = text.length; i < i_len; i++) {
    const char = text[i];
    const charCode = char.charCodeAt(0).toString(16);
    console.log({ char, charCode });
    if (charCode == '200b' /* 0xE2 */) {
      if (consecutive > 1) {
        for (let j = 0, j_len = consecutive - 1; j < j_len; j++) {
          result += '0';
        }
      }
      consecutive = 0;
      result += '1';
    } else {
      consecutive++;
    }
  }

  console.log(`:${result}:`);
}

function readTextFile(file)
{
  var rawFile = new XMLHttpRequest();
  rawFile.open("GET", file, false);
  rawFile.onreadystatechange = function () {
    if(rawFile.readyState === 4) {
      if(rawFile.status === 200 || rawFile.status == 0) {
        const text = rawFile.responseText;
        console.log('loaded');
        console.log(`::${text}::`);
        process(text);
      }
    }
  }
  rawFile.send(null);
}

readTextFile("ghost_text.txt");
